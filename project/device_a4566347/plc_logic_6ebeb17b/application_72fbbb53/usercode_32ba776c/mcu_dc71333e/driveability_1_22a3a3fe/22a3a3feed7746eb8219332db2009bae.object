{"payload":{"meta":{"Graph":{"@Type":"81297157","@Value":{"Guid":"(Guid)22a3a3fe-ed77-46eb-8219-332db2009bae","ParentGuid":"(Guid)72fbbb53-2a88-4ed3-8712-bbc040dc684e","Name":"(string)Driveability_1","Properties":{"@Type":"2c41fa04:IDictionary","@Value":[{"@Key":"(Guid)829a18f2-c514-4f6e-9634-1df173429203","@Value":{"@Type":"829a18f2","@Value":{"ParentObjects":{"@Type":"fa2ee218:IDictionary","@Value":[{"@Key":"(Guid)d9b2b2cc-ea99-4c3b-aa42-1e5c49e65b84","@Value":"(Guid)dc71333e-2568-456d-a856-98209e4248b5"}]}}}}]},"TypeGuid":"(Guid)6f9dac99-8de1-4efc-8465-68ac443b7d08","EmbeddedTypeGuids":{"@Type":"[Guid]","@Value":["(Guid)a9ed5b7e-75c5-4651-af16-d2c27e98cb94","(Guid)3b83b776-fb25-43b8-99f2-3c507c9143fc"]}}},"TypeInfos":{"2c41fa04":"{2c41fa04-1834-41c1-816e-303c7aa2c05b}","81297157":"{81297157-7ec9-45ce-845e-84cab2b88ade}","829a18f2":"{829a18f2-c514-4f6e-9634-1df173429203}","fa2ee218":"{fa2ee218-a39b-4b6d-b249-49dbddbd168a}","Guid":"System.Guid","string":"System.String"}},"object":{"Graph":{"@Type":"6f9dac99","@Value":{"SpecialFunc":{"@Type":"0db3d7bb:Enum","@Value":"None"},"Implementation":{"@Type":"3b83b776","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextLines":{"@Type":"[a5de0b0b]","@Value":[{"@Type":"a5de0b0b","@Value":{"Id":"(long)587","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)588","Tag":null,"Text":"(string)(*ABS*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)589","Tag":null,"Text":"(string)IF (CAN3_Rx.Mode_Button AND CAN3_Rx.Down_Button) = TRUE THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)590","Tag":null,"Text":"(string)\tSecretTractionOff :=\tTRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)591","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)592","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)593","Tag":null,"Text":"(string)IF (CAN3_Rx.Mode_Button AND CAN3_Rx.Up_Button) = TRUE THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)594","Tag":null,"Text":"(string)\tSecretTractionOff := \tFALSE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)595","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)596","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)597","Tag":null,"Text":"(string)IF (gq_ABSActive = TRUE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)598","Tag":null,"Text":"(string)\tgq_ABS_TorqueDisable\t:=\tTRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)599","Tag":null,"Text":"(string)ELSIF (gq_ABSActive = FALSE AND gr_AccelPedal_Perc > 0.03(*3%*)) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)600","Tag":null,"Text":"(string)\tgq_ABS_TorqueDisable\t:=\tFALSE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)601","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)602","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)603","Tag":null,"Text":"(string)IF (gq_Frosty_NoWheelSpeedSensors = TRUE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)604","Tag":null,"Text":"(string)\thr_STABLOSS_HIGHSPD_IVECO\t:=\t10; (*Set so that Stability loss detection does not prevent drive*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)605","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)606","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)607","Tag":null,"Text":"(string)IF (gu8_ChassisType = CHASSIS_IVECO AND gq_StabTracDisable_Rx = FALSE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)608","Tag":null,"Text":"(string)\t(*Traction Control*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)609","Tag":null,"Text":"(string)\tgr_RearAxle_RelativeSpeed_kph\t:= (gr_EBC2_KB_RearRight1RelSpd + gr_EBC2_KB_RearLeft1RelSpd) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)610","Tag":null,"Text":"(string)\tIF (ABS(gr_RearAxle_RelativeSpeed_kph) > TRACTIONLOSS_RELSPEED(*Change this value to be whatever the speed difference needs to be to trigger can be decimal*)) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)611","Tag":null,"Text":"(string)\t\tgu8_TractionLoss\t:=\t1(*TRUE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)612","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)613","Tag":null,"Text":"(string)\t\tgu8_TractionLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)614","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)615","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)616","Tag":null,"Text":"(string)\t(*Stability*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)617","Tag":null,"Text":"(string)\tIF (gr_VehicleSpeed_kmph > hu8_StabRampSpeed) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)618","Tag":null,"Text":"(string)\t\tSTABLOSS_RELSPEED := hr_STABLOSS_HIGHSPD_IVECO;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)619","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)620","Tag":null,"Text":"(string)\t\tSTABLOSS_RELSPEED := hr_STABLOSS_HIGHSPD_IVECO + ((hu8_StabRampSpeed - ABS(gr_VehicleSpeed_kmph)) * hr_StabIncreaseMultiplier_IVECO / hu8_StabRampSpeed);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)621","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)622","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)623","Tag":null,"Text":"(string)\tgr_LeftWheels_RelativeSpeed_kph\t\t:=\t(gr_EBC2_KB_FrontLeftRelSpd + gr_EBC2_KB_RearLeft1RelSpd) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)624","Tag":null,"Text":"(string)\tgr_RightWheels_RelativeSpeed_kph\t:=\t(gr_EBC2_KB_FrontRightRelSpd + gr_EBC2_KB_RearRight1RelSpd) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)625","Tag":null,"Text":"(string)\tIF (ABS(gr_LeftWheels_RelativeSpeed_kph) > STABLOSS_RELSPEED OR ABS(gr_RightWheels_RelativeSpeed_kph) > STABLOSS_RELSPEED) THEN (*Can equally use decimal numbers here if needed*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)626","Tag":null,"Text":"(string)\t\tgu8_StabilityLoss\t:=\t1(*TRUE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)627","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)628","Tag":null,"Text":"(string)\t\tgu8_StabilityLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)629","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)630","Tag":null,"Text":"(string)ELSIF (gu8_ChassisType = CHASSIS_BOB OR gu8_ChassisType = CHASSIS_ESTARGLIDER) AND (gq_StabTracDisable_Rx = FALSE AND SecretTractionOff = FALSE) THEN // OR should be AND"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)631","Tag":null,"Text":"(string)\t(*Traction Control*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)632","Tag":null,"Text":"(string)\thr_DriveSpeed\t:= (gu16_Bob_RightDrive_CAN + gu16_Bob_LeftDrive_CAN) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)633","Tag":null,"Text":"(string)\thr_FrontSpeed\t:= (gu16_Bob_RightFront_CAN + gu16_Bob_LeftFront_CAN) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)634","Tag":null,"Text":"(string)\thr_TractionSpdDiff\t:=\tABS(hr_DriveSpeed - hr_FrontSpeed);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)635","Tag":null,"Text":"(string)\tIF (hr_TractionSpdDiff > TRACTIONLOSS_SPEED(*Change this value to be whatever the speed difference needs to be to trigger can be decimal*)) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)636","Tag":null,"Text":"(string)\t\tgu8_TractionLoss\t:=\t1(*TRUE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)637","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)638","Tag":null,"Text":"(string)\t\tgu8_TractionLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)639","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)640","Tag":null,"Text":"(string)\t(*Stability*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)641","Tag":null,"Text":"(string)\thr_LeftWheels_Speed\t\t:=\t(gu16_Bob_LeftFront_CAN + gu16_Bob_LeftDrive_CAN) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)642","Tag":null,"Text":"(string)\thr_RightWheels_Speed\t:=\t(gu16_Bob_RightFront_CAN + gu16_Bob_RightDrive_CAN) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)643","Tag":null,"Text":"(string)\thr_StabilitySpdDiff\t\t:=\tABS(hr_LeftWheels_Speed - hr_RightWheels_Speed);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)644","Tag":null,"Text":"(string)\tIF (hr_StabilitySpdDiff > STABLOSS_SPEED) THEN (*Can equally use decimal numbers here if needed*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)645","Tag":null,"Text":"(string)\t\tgu8_StabilityLoss\t:=\t1(*TRUE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)646","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)647","Tag":null,"Text":"(string)\t\tgu8_StabilityLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)648","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)649","Tag":null,"Text":"(string)ELSIF (gu8_ChassisType = CHASSIS_DENNIS AND (gq_StabTracDisable_Rx = FALSE AND SecretTractionOFF = FALSE)) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)650","Tag":null,"Text":"(string)\t(*Traction Control*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)651","Tag":null,"Text":"(string)\t(*gr_RearAxle_RelativeSpeed_kph\t:= (gr_EBC2_KB_RearRight1RelSpd + gr_EBC2_KB_RearLeft1RelSpd) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)652","Tag":null,"Text":"(string)\tIF (ABS(gr_RearAxle_RelativeSpeed_kph) > TRACTIONLOSS_RELSPEED(*Change this value to be whatever the speed difference needs to be to trigger can be decimal*)) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)653","Tag":null,"Text":"(string)\t\tgu8_TractionLoss\t:=\t1(*TRUE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)654","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)655","Tag":null,"Text":"(string)\t\tgu8_TractionLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)656","Tag":null,"Text":"(string)\tEND_IF*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)657","Tag":null,"Text":"(string)\t(*Stability*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)658","Tag":null,"Text":"(string)\tIF (gr_VehicleSpeed_kmph > hu8_StabRampSpeed) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)659","Tag":null,"Text":"(string)\t\tSTABLOSS_RELSPEED := hr_STABLOSS_HIGHSPD;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)660","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)661","Tag":null,"Text":"(string)\t\tSTABLOSS_RELSPEED := hr_STABLOSS_HIGHSPD + ((hu8_StabRampSpeed - ABS(gr_VehicleSpeed_kmph)) * hr_StabIncreaseMultiplier / hu8_StabRampSpeed);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)662","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)663","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)664","Tag":null,"Text":"(string)\tgr_LeftWheels_RelativeSpeed_kph\t\t:=\t(gr_EBC2_KB_FrontLeftRelSpd + gr_EBC2_KB_RearLeft1RelSpd) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)665","Tag":null,"Text":"(string)\tgr_RightWheels_RelativeSpeed_kph\t:=\t(gr_EBC2_KB_FrontRightRelSpd + gr_EBC2_KB_RearRight1RelSpd) / 2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)666","Tag":null,"Text":"(string)\thr_StabilityRelativeDifference\t:=\tABS(gr_LeftWheels_RelativeSpeed_kph - gr_RightWheels_RelativeSpeed_kph);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)667","Tag":null,"Text":"(string)\tIF (*(ABS(gr_LeftWheels_RelativeSpeed_kph) > STABLOSS_RELSPEED OR ABS(gr_RightWheels_RelativeSpeed_kph) > STABLOSS_RELSPEED)*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)668","Tag":null,"Text":"(string)\t\t(hr_StabilityRelativeDifference > STABLOSS_RELSPEED) THEN (*Can equally use decimal numbers here if needed*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)669","Tag":null,"Text":"(string)\t\tgu8_StabilityLoss\t:=\t1(*TRUE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)670","Tag":null,"Text":"(string)\tELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)671","Tag":null,"Text":"(string)\t\tgu8_StabilityLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)672","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)673","Tag":null,"Text":"(string)\tgu8_TractionLoss\t:=\tgu8_EBC1_ASREngineControlActive;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)674","Tag":null,"Text":"(string)\t(*gu8_StabilityLoss\t:=\tgu8_EBC1_ASRBrakeControlActive;*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)675","Tag":null,"Text":"(string)ELSIF (gq_StabTracDisable_Rx = TRUE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)676","Tag":null,"Text":"(string)\tgu8_TractionLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)677","Tag":null,"Text":"(string)\tgu8_StabilityLoss\t:=\t0(*FALSE*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)678","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)679","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)680","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)681","Tag":null,"Text":"(string)(*Zero torque and Recovery*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)682","Tag":null,"Text":"(string)IF (gu8_TractionLoss = 1 OR gu8_StabilityLoss = 1 (* REAMED by IAIN 121021 OR Sevcon2_Control.NO_OIL*)) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)683","Tag":null,"Text":"(string)\tgq_ZeroTorqueRq\t:=\tTRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)684","Tag":null,"Text":"(string)\tgton_TorqueReIntro_Timer(IN := FALSE, PT := T#0MS);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)685","Tag":null,"Text":"(string)ELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)686","Tag":null,"Text":"(string)\tgton_TorqueReIntro_Timer(IN := TRUE, PT := T#2000MS);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)687","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)688","Tag":null,"Text":"(string)IF (gton_TorqueReIntro_Timer.Q = TRUE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)689","Tag":null,"Text":"(string)\tgq_ZeroTorqueRq\t:=\tFALSE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)690","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)691","Tag":null,"Text":"(string)gr_TorqueReIntro\t:=\tTIME_TO_REAL(gton_TorqueReIntro_Timer.ET);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)692","Tag":null,"Text":"(string)gr_TorqueReIntroMax\t:=\tTIME_TO_REAL(T#2000MS);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)693","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)694","Tag":null,"Text":"(string)(*Regen*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)695","Tag":null,"Text":"(string)(*Selectable regen setting needed*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)696","Tag":null,"Text":"(string)IF (gu8_BMS_SOC < 90) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)697","Tag":null,"Text":"(string)\tgr_RegenSOCMultiplier\t:=\t1;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)698","Tag":null,"Text":"(string)ELSIF (gu8_BMS_SOC >= 90 AND gu8_BMS_SOC < 95) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)699","Tag":null,"Text":"(string)\tgr_RegenSOCMultiplier\t:=\t0.5;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)700","Tag":null,"Text":"(string)ELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)701","Tag":null,"Text":"(string)\tgr_RegenSOCMultiplier\t:=\t0;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)702","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)703","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)704","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)705","Tag":null,"Text":"(string)IF (gr_VehicleSpeed_kmph > REGEN_CUTOFF_SPEED) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)706","Tag":null,"Text":"(string)\thton_RegenHysteresis(IN := TRUE, PT := T#1000MS); // bring down to T#1s? Was t#5s"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)707","Tag":null,"Text":"(string)ELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)708","Tag":null,"Text":"(string)\thton_RegenHysteresis(IN := FALSE, PT := T#0S);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)709","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)710","Tag":null,"Text":"(string)hq_RegenAvailable\t:=\thton_RegenHysteresis.Q;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)995","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)711","Tag":null,"Text":"(string)hton_Overspeed_Regen (IN:= gr_VehicleSpeed_kmph > 55, PT:= T#5S);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)712","Tag":null,"Text":"(string)IF ((gr_AccelPedal_Perc < 0.01 OR (gr_VehicleSpeed_kmph > 55 AND hton_Overspeed_Regen.Q)) AND hq_RegenAvailable = TRUE) THEN //OR gr_VehicleSpeed_kmph > 56 added"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)713","Tag":null,"Text":"(string)\tgq_RegenActive\t:=\tTRUE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)714","Tag":null,"Text":"(string)\tgr_RegenSpeedDegrading\t:=\tLIMIT(0, (gr_VehicleSpeed_kmph - REGEN_CUTOFF_SPEED), REGEN_WINDDOWNABOVECUTOFF_SPEED) / REGEN_WINDDOWNABOVECUTOFF_SPEED;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)992","Tag":null,"Text":"(string)\tIF gr_VehicleSpeed_kmph > 55 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)993","Tag":null,"Text":"(string)\tDENNIS_ADJUSTABLE_REGEN := 1.2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)994","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)845","Tag":null,"Text":"(string)//////////////\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)989","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)988","Tag":null,"Text":"(string)//DENNIS with BRAKE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)959","Tag":null,"Text":"(string)\tIF (gu8_ChassisType = CHASSIS_DENNIS AND gq_BrakeSwitch = TRUE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)960","Tag":null,"Text":"(string)\t\tDENNIS_ADJUSTABLE_REGEN := 1.2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)965","Tag":null,"Text":"(string)\t\tgr_RegenMultiplierRq\t:=\tDENNIS_ADJUSTABLE_REGEN;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)963","Tag":null,"Text":"(string)\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)964","Tag":null,"Text":"(string)\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)961","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)962","Tag":null,"Text":"(string)//DENNIS without BRAKE\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)715","Tag":null,"Text":"(string)\tIF (gu8_ChassisType = CHASSIS_DENNIS AND gq_BrakeSwitch = FALSE) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)716","Tag":null,"Text":"(string)\t\tgr_RegenMultiplierRq\t:=\tDENNIS_ADJUSTABLE_REGEN(*40%*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)717","Tag":null,"Text":"(string)\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)718","Tag":null,"Text":"(string)\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)865","Tag":null,"Text":"(string)\t\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)846","Tag":null,"Text":"(string)\t\tIF Dennis_Regen.RegenCounterValue = 0 THEN "}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)847","Tag":null,"Text":"(string)\t\t\tDENNIS_ADJUSTABLE_REGEN := 0;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)848","Tag":null,"Text":"(string)\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)851","Tag":null,"Text":"(string)\t\tIF Dennis_Regen.RegenCounterValue = 1 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)852","Tag":null,"Text":"(string)\t\t\tDENNIS_ADJUSTABLE_REGEN := 0.6;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)853","Tag":null,"Text":"(string)\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)856","Tag":null,"Text":"(string)\t\tIF Dennis_Regen.RegenCounterValue = 2 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)857","Tag":null,"Text":"(string)\t\t\tDENNIS_ADJUSTABLE_REGEN := 0.8;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)855","Tag":null,"Text":"(string)\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)859","Tag":null,"Text":"(string)\t\tIF Dennis_Regen.RegenCounterValue = 3 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)860","Tag":null,"Text":"(string)\t\t\tDENNIS_ADJUSTABLE_REGEN := 1;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)858","Tag":null,"Text":"(string)\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)862","Tag":null,"Text":"(string)\t\tIF Dennis_Regen.RegenCounterValue = 4 THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)863","Tag":null,"Text":"(string)\t\t\tDENNIS_ADJUSTABLE_REGEN := 1.2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)953","Tag":null,"Text":"(string)\t\tEND_IF\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)966","Tag":null,"Text":"(string)//////////////\t\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)719","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)844","Tag":null,"Text":"(string)ELSIF (gq_BrakeSwitch = TRUE AND gu8_ChassisType <> CHASSIS_DENNIS) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)720","Tag":null,"Text":"(string)\t\tIF (gu8_RegenSelector = 0) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)721","Tag":null,"Text":"(string)\t\t\tgr_RegenMultiplierRq\t:=\t0.7(*40%*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)722","Tag":null,"Text":"(string)\t\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)723","Tag":null,"Text":"(string)\t\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)724","Tag":null,"Text":"(string)\t\tELSIF (gu8_RegenSelector = 1) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)725","Tag":null,"Text":"(string)\t\t\tgr_RegenMultiplierRq\t:=\t0.7(*40%*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)726","Tag":null,"Text":"(string)\t\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)727","Tag":null,"Text":"(string)\t\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)728","Tag":null,"Text":"(string)\t\tELSIF (gu8_RegenSelector = 2) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)729","Tag":null,"Text":"(string)\t\t\tgr_RegenMultiplierRq\t:=\t0.7(*60%*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)730","Tag":null,"Text":"(string)\t\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)731","Tag":null,"Text":"(string)\t\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)732","Tag":null,"Text":"(string)\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)733","Tag":null,"Text":"(string)\tELSIF (gq_BrakeSwitch = FALSE AND gu8_ChassisType <> CHASSIS_DENNIS) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)734","Tag":null,"Text":"(string)\t\tIF (gu8_RegenSelector = 0) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)735","Tag":null,"Text":"(string)\t\t\tgr_RegenMultiplierRq\t:=\t0(*0%*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)736","Tag":null,"Text":"(string)\t\t\thton_RegenStartTimer(IN := FALSE, PT := T#0MS);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)737","Tag":null,"Text":"(string)\t\t\tgr_RegenIntroCF := 0;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)738","Tag":null,"Text":"(string)\t\tELSIF (gu8_RegenSelector = 1) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)739","Tag":null,"Text":"(string)\t\t\tgr_RegenMultiplierRq\t:=\t0.6(*0.4(*40%*)*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)740","Tag":null,"Text":"(string)\t\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)741","Tag":null,"Text":"(string)\t\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)742","Tag":null,"Text":"(string)\t\tELSIF (gu8_RegenSelector = 2) THEN"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)743","Tag":null,"Text":"(string)\t\t\tgr_RegenMultiplierRq\t:=\t1(*0.6(*60%*)*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)744","Tag":null,"Text":"(string)\t\t\thton_RegenStartTimer(IN := TRUE, PT := htime_RegenIntro);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)745","Tag":null,"Text":"(string)\t\t\tgr_RegenIntroCF := LIMIT(0, (TIME_TO_REAL(hton_RegenStartTimer.ET) / TIME_TO_REAL(hton_RegenStartTimer.PT)), 1);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)746","Tag":null,"Text":"(string)\t\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)747","Tag":null,"Text":"(string)\tEND_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)748","Tag":null,"Text":"(string)ELSE"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)749","Tag":null,"Text":"(string)\tgq_RegenActive\t:=\tFALSE;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)750","Tag":null,"Text":"(string)\tgr_RegenMultiplierRq\t:=\t0;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)751","Tag":null,"Text":"(string)\thton_RegenStartTimer(IN := FALSE, PT := T#0MS);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)752","Tag":null,"Text":"(string)\tgr_RegenIntroCF := 0;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)753","Tag":null,"Text":"(string)END_IF"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)754","Tag":null,"Text":"(string)(*Also need battery SOC as multiplier <90 x1, 90<X<95 x0.5, >95 x0*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)755","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)756","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)757","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)758","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)759","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)760","Tag":null,"Text":"(string)(*Creep / Hill hold*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)761","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)762","Tag":null,"Text":"(string)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)5","Tag":null,"Text":"(string)"}}]}}}}},"Interface":{"@Type":"a9ed5b7e","@Value":{"TextDocument":{"@Type":"f3878285","@Value":{"TextLines":{"@Type":"[a5de0b0b]","@Value":[{"@Type":"a5de0b0b","@Value":{"Id":"(long)1038","Tag":null,"Text":"(string)PROGRAM Driveability_1"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1039","Tag":null,"Text":"(string)VAR"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1040","Tag":null,"Text":"(string)\thq_RegenAvailable\t:\tBOOL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1041","Tag":null,"Text":"(string)\thton_RegenHysteresis\t:\tTON;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1042","Tag":null,"Text":"(string)\thr_DriveSpeed\t:\tREAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1043","Tag":null,"Text":"(string)\thr_FrontSpeed\t:\tREAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1044","Tag":null,"Text":"(string)\thr_LeftWheels_Speed\t:\tREAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1045","Tag":null,"Text":"(string)\thr_RightWheels_Speed\t:\tREAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1046","Tag":null,"Text":"(string)\thr_TractionSpdDiff\t:\tREAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1047","Tag":null,"Text":"(string)\thr_StabilitySpdDiff\t:\tREAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1048","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1049","Tag":null,"Text":"(string)\t(*Traction and Stability Dennis and Iveco*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1050","Tag":null,"Text":"(string)\tTRACTIONLOSS_RELSPEED\t:\tREAL\t:=\t300; (*Temporarily set high until time to configure these to the correct value*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1051","Tag":null,"Text":"(string)\tSTABLOSS_RELSPEED\t\t:\tREAL\t:=\t3; (*Temporarily set high until time to configure these to the correct value*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1052","Tag":null,"Text":"(string)\t(*Bob traction and stability values*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1053","Tag":null,"Text":"(string)\tTRACTIONLOSS_SPEED\t:\tUINT\t:=\t3500;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1054","Tag":null,"Text":"(string)\tSTABLOSS_SPEED\t\t:\tUINT\t:=\t1000;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1055","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1056","Tag":null,"Text":"(string)\tREGEN_CUTOFF_SPEED\t:\tUSINT\t:=\t5;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1057","Tag":null,"Text":"(string)\tREGEN_WINDDOWNABOVECUTOFF_SPEED\t:\tUSINT\t:=\t25;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1058","Tag":null,"Text":"(string)\thton_RegenStartTimer : TON;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1059","Tag":null,"Text":"(string)\t// This ideally should be set to 100ms"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1060","Tag":null,"Text":"(string)\thtime_RegenIntro : TIME := T#100MS;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1061","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1062","Tag":null,"Text":"(string)\tDENNIS_ADJUSTABLE_REGEN\t:\tREAL\t:=\t0.4 (*0.4*);"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1063","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1064","Tag":null,"Text":"(string)\thr_StabilityRelativeDifference : REAL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1065","Tag":null,"Text":"(string)\thu8_StabRampSpeed\t:\tUSINT\t:=\t30;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1066","Tag":null,"Text":"(string)\thr_STABLOSS_HIGHSPD\t:\tREAL\t:=\t2.5;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1067","Tag":null,"Text":"(string)\thr_StabIncreaseMultiplier\t:\tREAL\t:=\t3;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1068","Tag":null,"Text":"(string)\thr_STABLOSS_HIGHSPD_IVECO\t:\tREAL\t:=\t1.5;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1069","Tag":null,"Text":"(string)\thr_StabIncreaseMultiplier_IVECO\t:\tREAL\t:=\t2;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1070","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1071","Tag":null,"Text":"(string)\thr_RegenTest\t:\tREAL\t:=\t1; (*Use this value in place of the constants for regen multiplier to allow changes to be made by forcing on the fly*)"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1072","Tag":null,"Text":"(string)\t"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1073","Tag":null,"Text":"(string)\tSecretTractionOff: BOOL;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1074","Tag":null,"Text":"(string)\thton_Overspeed_Regen: TON;"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)1075","Tag":null,"Text":"(string)END_VAR"}},{"@Type":"a5de0b0b","@Value":{"Id":"(long)49","Tag":null,"Text":"(string)"}}]}}}}},"UniqueIdGenerator":"(string)1075","POULevel":{"@Type":"8e575c5b:Enum","@Value":"Standard"},"ChildObjectGuids":{"@Type":"ArrayList:IList","@Value":[]},"AddAttributeSubsequent":"(bool)False"}},"TypeInfos":{"0db3d7bb":"{0db3d7bb-cde0-4416-9a7b-ce49a0124323}","3b83b776":"{3b83b776-fb25-43b8-99f2-3c507c9143fc}","6f9dac99":"{6f9dac99-8de1-4efc-8465-68ac443b7d08}","8e575c5b":"{8e575c5b-1d37-49c6-941b-5c0ec7874787}","a5de0b0b":"{a5de0b0b-1cb5-4913-ac21-9d70293ec00d}","a9ed5b7e":"{a9ed5b7e-75c5-4651-af16-d2c27e98cb94}","ArrayList":"System.Collections.ArrayList","bool":"System.Boolean","f3878285":"{f3878285-8e4f-490b-bb1b-9acbb7eb04db}","long":"System.Int64","string":"System.String"}}},"FormatVersion":"1.0"}